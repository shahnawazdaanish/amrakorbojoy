!function(e){"use strict";var t=jQuery(document);t.ready(function(e){function i(){e("#widgets-right .wpex-social-widget-services-list, .customize-control .wpex-social-widget-services-list").each(function(){var t=e(this).attr("id"),i=e("#"+t);i.sortable({placeholder:"placeholder",opacity:.6,update:function(e,t){void 0!==wp.customize?i.find("input.ui-sortable-handle").trigger("change"):i.find("input.wpex-social-widget-services-hidden-field").trigger("change")}})})}function n(){e("#widgets-right .wpex-widget-settings-form .wpex-repeater-field, .customize-control .wpex-widget-settings-form .wpex-repeater-field").each(function(){var t=e(this).attr("id"),i=e("#"+t);i.sortable({revert:!1,delay:100,cursor:"move",placeholder:"wpex-rpf-placeholder",opacity:.8,start:function(e,t){t.placeholder.height(t.item.height())},update:function(e,t){i.find("input").eq(0).trigger("change")}})})}function d(){var t=!0,i=wp.media.editor.send.attachment;e(document).on("click",".wpex-widget-settings-form .wpex-upload-button",function(){wp.media.editor.send.attachment;var n=e(this).prev();return t=!0,wp.media.editor.send.attachment=function(e,d){if(!t)return i.apply(this,[e,d]);n.val(d.id).trigger("change")},wp.media.editor.open(),!1}),e(".add_media").on("click",function(){t=!1})}i(),t.on("widget-updated",i),t.on("widget-added",i),e("body").on("click",".wpex-widget-settings-form .wpex-rpf-add",function(t){t.preventDefault();var i=e(this).closest(".wpex-widget-settings-form"),n=i.find(".wpex-rpf-clone"),d=e("<li>"+n.html()+"</li>");i.find(".wpex-repeater-field").append(d),d.find("p").eq(0).find("input").eq(0).focus()}),e("body").on("click",".wpex-widget-settings-form .wpex-rpf-remove",function(t){t.preventDefault(),confirm(wpexCustomWidgets.confirm)&&(e(this).parent().find('input[type="text"]').trigger("change"),e(this).closest("li").remove())}),n(),t.on("widget-updated",n),t.on("widget-added",n),d(),void 0!==wp.customize&&(t.on("widget-updated",d),t.on("widget-added",d))})}();