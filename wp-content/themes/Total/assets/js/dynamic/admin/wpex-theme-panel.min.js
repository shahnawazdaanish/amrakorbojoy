!function(r){"use strict";function n(){var e=r("#wpex-header-builder-select, #wpex-footer-builder-select");if(e.length){var i=r("#wpex-admin-page table tr"),n=e.parents("tr"),s=r(".wpex-edit-template-links-ajax"),c=r(".wpex-edit-template-links-spinner");e.val()?s.show():(r(".wpex-create-new-template").show(),i.not(n).hide()),r(e).change(function(){var e,t,a=r(this).val();s.hide(),a?(i.show(),r(".wpex-create-new-template").hide(),e=a,t={action:s.data("action"),nonce:s.data("nonce"),template_id:e},c.show(),r.post(ajaxurl,t,function(e){e&&(s.html(e),s.show()),c.hide()})):(i.not(n).hide(),s.hide(),r(".wpex-create-new-template").show())})}}r(document).ready(function(){var t,e,a,i;r(".wpex-checkbox").click(function(){r(".wpex-theme-panel-updated").show()}),r('.wpex-theme-panel .manage-right input[type="text"]').change(function(){r(".wpex-theme-panel-updated").show()}),r(".wpex-theme-panel-updated a").click(function(e){e.preventDefault(),r("#wpex-theme-panel-form #submit").click()}),r(".wpex-checkbox").change(function(){var e=r(this).parent("th").parent(".wpex-module");e.hasClass("wpex-disabled")?e.removeClass("wpex-disabled"):e.addClass("wpex-disabled")}),r(".wpex-theme-panel-module-link").click(function(){r(".wpex-theme-panel-updated").show();var e=r(this),t=e.attr("href"),a=r(t).find(".wpex-checkbox"),i=e.parents(".wpex-module");return a.is(":checked")?a.attr("checked",!1):a.attr("checked",!0),i.hasClass("wpex-disabled")?i.removeClass("wpex-disabled"):i.addClass("wpex-disabled"),!1}),(t=r(".wpex-filter-active button")).click(function(){var e=r(this).data("filter-by");return t.removeClass("active"),r(this).addClass("active"),r(".wpex-module").removeClass("wpex-filterby-hide"),"active"===e?r(".wpex-module").each(function(){r(this).hasClass("wpex-disabled")&&r(this).addClass("wpex-filterby-hide")}):"inactive"===e&&r(".wpex-module").each(function(){r(this).hasClass("wpex-disabled")||r(this).addClass("wpex-filterby-hide")}),!1}),r(".wpex-theme-panel-sort a").click(function(){var e=r(this).data("category");return r(".wpex-theme-panel-sort a").removeClass("wpex-active-category"),r(this).addClass("wpex-active-category"),"all"===e?r(".wpex-module").removeClass("wpex-sort-hide"):(r(".wpex-module").addClass("wpex-sort-hide"),r(".wpex-category-"+e).each(function(){r(this).removeClass("wpex-sort-hide")})),!1}),r(".wpex-module .column-name .wpex-toggle-icon").each(function(){var t=r(this).parent(".column-name");t.css({cursor:"pointer"}),t.click(function(){var e=r(this);return r(".wpex-module .column-name").not(e).removeClass("wpex-show-description"),r(".wpex-toggle-icon").show(),e.hasClass("wpex-show-description")?(e.removeClass("wpex-show-description"),t.find(".wpex-toggle-icon").show()):(e.toggleClass("wpex-show-description"),t.find(".wpex-toggle-icon").toggle()),!1})}),e=r(".wpex-module.wpex-active").length,a=r(".wpex-module.wpex-disabled").length,r(".wpex-active-items-btn > span").text("("+e+")"),r(".wpex-inactive-items-btn > span").text("("+a+")"),void 0!==r.fn.chosen&&(r(".wpex-chosen").chosen(),r(".wpex-chosen-multiselect").chosen({search_contains:!0}),r("#wpex_header_builder_select_chosen, #wpex_footer_builder_select_chosen").css("width","300")),void 0!==r.fn.wpColorPicker&&r(".wpex-color-field").wpColorPicker(),function(){var i=r(".wpex-panel-js-tabs a");if(i.length){var e=r(".wpex-panel-js-tabs a.nav-tab-active").attr("href").substring(1);r(".wpex-"+e).show(),r(i).each(function(){var a=r(this);a.click(function(e){e.preventDefault(),i.removeClass("nav-tab-active"),a.addClass("nav-tab-active");var t=r(this).attr("href").substring(1);r(".wpex-tab-content").hide(),r(".wpex-"+t).show()})})}}(),r(".wpex-media-upload-button").click(function(e){e.preventDefault();var s=r(this),c=s.prev(),o=s.parent().find(".wpex-media-live-preview img"),p=s.parent().find(".wpex-media-remove"),l=wp.media({library:{type:"image"},multiple:!1}).on("select",function(e){var t=l.state().get("selection").first(),a=t.toJSON().id,i=t.toJSON().url;if(p.length&&p.addClass("wpex-show"),o.length)o.attr("src",i);else{var n=(o=s.parent().find(".wpex-media-live-preview")).data("image-size")?o.data("image-size"):"auto";o.append('<img src="'+i+'" style="height:'+n+"px;width:"+n+'px;" />')}c.val(a).trigger("change")}).open()}),r(".wpex-media-remove").each(function(){var e=r(this),t=e.parent().find(".wpex-media-input"),a=t.val(),i=e.parent().find(".wpex-media-live-preview");a&&e.addClass("wpex-show"),e.on("click",function(){return t.val(""),i.find("img").remove(),e.removeClass("wpex-show"),!1}),t.on("keyup change",function(){if(!r(this).val())return i.find("img").remove(),e.removeClass("wpex-show"),!1})}),(i=r("#wpex-theme-license-form")).length&&i.submit(function(e){e.preventDefault();var t=r(this),i=t.find("#submit"),n=t.find(".wpex-spinner"),s=i.hasClass("activate")?"activate":"deactivate",c=t.find("input#wpex_license"),o=t.find("input#wpex_dev_license");r(".wpex-admin-ajax-notice").hide().removeClass("notice-warning updated notice-error"),r.ajax({type:"POST",url:ajaxurl,data:{action:"wpex_theme_license_form",process:s,license:t.find("input#wpex_license").val(),devlicense:o.is(":checked")?"checked":0,nonce:t.find("input#wpex_theme_license_form_nonce").val()},beforeSend:function(){n.css("opacity","1"),i.prop("disabled",!0)},success:function(e){if(n.css("opacity","0"),i.prop("disabled",!1),e.success)if(o.parent().hide(),"activate"===s)c.attr("readonly","readonly"),i.removeClass("activate").addClass("deactivate").val(i.data("deactivate"));else if("deactivate"===s)if(c.attr("placeholder","").removeAttr("readonly"),c.val(""),i.removeClass("deactivate").addClass("activate").val(i.data("activate")),e.clearLicense){var t=window.location.href,a="";a=-1<t.indexOf("?")?t+"&license-cleared=1":t+"?license-cleared=1",window.location=a}else location.reload();e.message&&r(".wpex-admin-ajax-notice").addClass(e.messageClass).html("<p>"+e.message+"</p>").show()}})}),r(".wpex-custom-css-panel-wrap .form-table").click(function(){r(".wpex-remember-to-save").show()}),r(".wpex-custom-css-panel-wrap .wpex-remember-to-save a").click(function(e){e.preventDefault(),r(".wpex-custom-css-panel-wrap form #submit").click()}),r("#wpex-dashicon-select a").click(function(){return r("#wpex-dashicon-select a.button-primary").removeClass("button-primary").addClass("button-secondary"),r(this).addClass("button-primary"),r(this).parents("#wpex-dashicon-select").next("input").val(r(this).data("value")),!1}),n(),r(".wpex-custom-actions .handlediv, .wpex-custom-actions .hndle").click(function(e){e.preventDefault(),r(this).parent().toggleClass("closed"),r(this).parent().find("textarea").focus()}),function(){var e=r("#wpex_image_resizing");if(e.length){var t=e.prop("checked"),a=r("#wpex_retina");t||(a.attr("checked",!1),r("#wpex_retina").closest("tr").hide()),r(e).change(function(){r(this).prop("checked")?(r("#wpex_retina").closest("tr").show(),r("#wpex_retina").attr("checked",!0)):(r("#wpex_retina").attr("checked",!1),r("#wpex_retina").closest("tr").hide())})}}(),r("#wpex-import-export-admin-page").length&&(r(".wpex-highlight-options").click(function(){return r("#wpex-customizer-export").focus().select(),!1}),r(".wpex-delete-options").click(function(){return r(this).hide(),r(".wpex-delete-options-warning, .wpex-cancel-delete-options").show(),r(".wpex-submit-form").val(wpextp.confirmReset),r("#wpex-reset-hidden").val("-1"),!1}),r(".wpex-cancel-delete-options").click(function(){return r(this).hide(),r(".wpex-delete-options-warning").hide(),r(".wpex-delete-options").show(),r(".wpex-submit-form").val(wpextp.importOptions),r("#wpex-reset-hidden").val(""),!1})),r("#wpex-customizer-manager-admin-page").length&&(r(".wpex-customizer-check-all").click(function(){return r(".wpex-customizer-editor-checkbox").each(function(){this.checked=!0}),!1}),r(".wpex-customizer-uncheck-all").click(function(){return r(".wpex-customizer-editor-checkbox").each(function(){this.checked=!1}),!1}))})}(jQuery);